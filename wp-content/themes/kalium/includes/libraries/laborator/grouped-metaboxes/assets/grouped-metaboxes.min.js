var kaliumGroupedMetaboxes={};!function($,t,e){"use strict";$(document).ready((function(){if("undefined"!=typeof acf){$.extend(e,{setLoading:function(t){var e;$("#kalium-acfpro-grouped-metaboxes")[t?"addClass":"removeClass"]("is-loading")},cacheId:function(){var t;return"kalium_acfpro_gm_tab_"+acf.data.post_id},setActiveTab:function(t){"object"==typeof store&&store.enabled&&store.set(e.cacheId(),{activeTab:t})},getActiveTab:function(){if("object"==typeof store&&store.enabled){var t=store.get(e.cacheId());if(t&&"activeTab"in t)return t.activeTab}return null}});var t=function(){"undefined"!=typeof acf&&this.init()};t.prototype={constructor:t.prototype.constructor,init:function(){var t=this,e="kalium-acfpro-grouped-metaboxes";this.groupedMetaboxes=_k.groupedMetaboxes,this.assignedContentTabs=[],this.currentTab="",this.$tabs=$("."+e+"-tabs"),this.$body=$("."+e+"-body"),this.$container=$("."+e+"-container"),this.buildTabsList(),this.assignContentTabs(),this.toggleVisibleTabs(),this.setActiveTab(),this.$container.addClass("loaded"),acf.addAction("check_screen_complete",(function(e,a){t.assignContentTabs(),t.toggleVisibleTabs(),t.setActiveTab()}))},getPostboxes:function(){var t=[],e=[];for(var a in this.groupedMetaboxes)e.push(a);return $.each(acf.getPostboxes(),(function(a,i){var n=i.data.key;-1!==$.inArray(n,e)&&t.push(i)})),t},buildTabsList:function(){var t=this;$.each(this.groupedMetaboxes,(function(e,a){var i=$('<li><a href="#"></a></li>'),n=a.title,o=a.icon;i.attr("data-group-key",e);var s=i.find("a");n=n.replace(/\s\(Portfolio Type.*?\)/i,""),s.html(n),o&&s.prepend('<i class="'+o+'"></i>'),t.$tabs.append(i),s.on("click",(function(a){a.preventDefault(),t.setActiveTab(e,!0)}))}))},assignContentTabs:function(){var t=this;$.each(t.getPostboxes(),(function(e,a){var i=a.data.id,n=$("#"+i);if(-1===$.inArray(t.assignedContentTabs,i)){var o=$('<div class="tab-entry"></div>');o.appendTo(t.$body),o.append(a.$el),t.assignedContentTabs.push(i)}}))},toggleVisibleTabs:function(){var t=this;$.each(t.getPostboxes(),(function(e,a){var i=!a.isVisible(),n=t.getTab(a);n&&n.$el[i?"addClass":"removeClass"]("visible")})),this.maintainHeight()},maintainHeight:function(){this.$body.css("min-height",this.$tabs.outerHeight())},getTab:function(t){var e=this,a=null;return $.each(this.groupedMetaboxes,(function(i,n){if(i===t.data.key)return(a=n).id=i,a.$el=e.$tabs.find('[data-group-key="'+i+'"]'),!1})),a},getActiveTab:function(){var t=this,a=null;return $.each(t.getPostboxes(),(function(t,e){if(!e.isVisible())return a=e.data.key,!1})),$.each(t.getPostboxes(),(function(t,i){if(e.getActiveTab()===i.data.key)return a=i.data.key,!1})),a},setActiveTab:function(t,a){t||(t=this.currentTab?this.currentTab:this.getActiveTab());var i=acf.getPostbox("acf-"+t);if(i){var n=this.getTab(i);n.$el.siblings().removeClass("active"),n.$el.addClass("active");var o=i.$el.parent(),s;o.siblings().removeClass("active"),o.addClass("active"),this.currentTab=t,a&&e.setActiveTab(t),this.maintainHeight()}}},new t}}))}(jQuery,window,kaliumGroupedMetaboxes),function($,t){"use strict";$(document).ready((function(){if("undefined"!=typeof acf){var e=function(e){var a="kalium-acfpro-portfolio-item-type",i={"type-1":"portfolio-item-type-1.png","type-2":"portfolio-item-type-2.png","type-3":"portfolio-item-type-3.png","type-4":"portfolio-item-type-4.png","type-5":"portfolio-item-type-5.png","type-6":"portfolio-item-type-6.png","type-7":"portfolio-item-type-7.png"};for(var n in i)i[n]=_k.kaliumAssetsDir+"admin/images/portfolio/"+i[n];e.addClass(a);var o=e.find(".acf-input"),s=o.find("select"),r=t.location.toString().match(/action=edit/),c=[s.val(),s.find("option:selected").html()],d=s.val(),l=$('<div class="'+a+'-images"><div class="loader"></div></div>');o.before(l),s.find("option").each((function(t,e){var n=$(e),o=n.val(),r=n.html(),c=$('<a href="#" class="'+a+'-option" data-value="'+o+'"><span><img src="'+i[o]+'" /></span><strong>'+r+"</strong></a>");c.find("img").on("load",(function(){$(this).addClass("loaded")})),l.append(c),c.on("click",(function(t){t.preventDefault(),n.prop("selected",!0).attr("selected",!0),s.trigger("change")}))}));var p=$('<div class="'+a+'-warning"></div>');r&&(p.append("<strong>Note:</strong> You are currently using <strong>"+c[1]+"</strong> type. If you change this portfolio type you may lose/overwrite some of the current settings."),l.after(p));var u=function(t){var e=s.val();(t||d!=e)&&(l.find("."+a+"-option").removeClass("active"),l.find("."+a+'-option[data-value="'+e+'"]').addClass("active"),d=e,acf.screen.data.item_type=e,acf.screen.check(),l.addClass("is-loading"),kaliumGroupedMetaboxes.setLoading(!0),e!=c[0]?p.slideDown(300):p.slideUp(300))};s.on("change",u),l.find("."+a+'-option[data-value="'+s.val()+'"]').addClass("active"),acf.addAction("check_screen_complete",(function(t,e){"item_type"in e&&(l.removeClass("is-loading"),kaliumGroupedMetaboxes.setLoading(!1))}),1),"post-new-php"==adminpage&&u(!0)},a=acf.getFields({name:"item_type"});a.length&&$.each(a,(function(t,a){var i=a.$el;e(i)}))}}))}(jQuery,window);